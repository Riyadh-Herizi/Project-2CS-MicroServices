
<div class="container-fluid">
    <input type="hidden" id="id_planning" value="<%=id%>">
  <div class="row">

    
      <div class="col-xs-auto col-sm-auto col-md-auto col-lg-auto " style="padding: 0px;">
        <div class="table-responsive">
          <table class="table text-center">
              <thead class="text-primary"style="background:#ffffff;border: 1px solid rgb(103, 128, 240)">

                  <tr id="times" class="collapse bg-primary" style="position: absolute;z-index: 3;display: hidden;">
                     <div>
                         <td></td>
                         <td>
                             <h4 class="text-white">Sunday</h4>
                          <label class="form-check-label text-white">
                              <input class="form-check-input" id="check_box-0" onclick="switch_day(0)" type="checkbox" checked> Work day
                          </label>
                          <div class="form-group row">
                              <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                              <div class="col-10">
                                  <input onchange="update_empty(this,0)" class="form-control" type="time" value="08:00" id="time-empty-0">
                              </div>
                          </div>

                      </td>
                         <td>
                            <h4 class="text-white">Monday</h4>
                             <label class="form-check-label text-white">
                                 <input class="form-check-input"  onclick="switch_day(1)" id="check_box-1" type="checkbox" checked> Work day
                             </label>
                             <div class="form-group row">
                                 <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                                 <div class="col-10">
                                     <input onchange="update_empty(this,1)" class="form-control" type="time" value="08:00" id="time-empty-1">
                                 </div>
                             </div>

                         </td>
                         <td>
                            <h4 class="text-white">Tuesday</h4>
                             <label class="form-check-label text-white">
                                 <input class="form-check-input" onclick="switch_day(2)"  id="check_box-2" type="checkbox" checked> Work day
                             </label>
                             <div class="form-group row">
                                 <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                                 <div class="col-10">
                                     <input onchange="update_empty(this,2)" class="form-control" type="time" value="08:00" id="time-empty-2">
                                 </div>
                             </div>

                         </td>
                         <td>
                            <h4 class="text-white">Wednesday</h4>
                             <label class="form-check-label text-white">
                                 <input class="form-check-input" onclick="switch_day(3)" id="check_box-3" type="checkbox" checked> Work day
                             </label>
                             <div class="form-group row">
                                 <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                                 <div class="col-10">
                                     <input onchange="update_empty(this,3)" class="form-control" type="time" value="08:00" id="time-empty-3">
                                 </div>
                             </div>

                         </td>
                         <td>
                            <h4 class="text-white">Thursday</h4>
                             <label class="form-check-label text-white">
                                 <input class="form-check-input" onclick="switch_day(4)" id="check_box-4" type="checkbox" checked> Work day
                             </label>
                             <div class="form-group row">
                                 <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                                 <div class="col-10">
                                     <input onchange="update_empty(this,4)" class="form-control" type="time" value="08:00" id="time-empty-4">
                                 </div>
                             </div>

                         </td>
                         <td>
                            <h4 class="text-white">Friday</h4>
                             <label class="form-check-label text-white">
                                 <input class="form-check-input" onclick="switch_day(5)" id="check_box-5" type="checkbox" checked> Work day
                             </label>
                             <div class="form-group row">
                                 <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                                 <div class="col-10">
                                     <input onchange="update_empty(this,5)" class="form-control" type="time" value="08:00" id="time-empty-5">
                                 </div>
                             </div>

                         </td>
                         <td> 
                            <h4 class="text-white">Saturday</h4>
                             <label class="form-check-label text-white">
                                 <input class="form-check-input"  onclick="switch_day(6)" id="check_box-6" type="checkbox" checked> Work day
                             </label>
                             <div class="form-group row ">
                                 <label for="example-time-input" class="col-2 col-form-label text-white">Start:</label>
                                 <div class="col-10">
                                     <input onchange="update_empty(this,6)" class="form-control" type="time" value="08:00" id="time-empty-6">
                                 </div>
                             </div>

                         </td>

                         </div>

                  </tr>


              <tr style="z-index: 1;">
                  <th scope="col">timeline</th>
                  <th scope="col">Sunday</th>
                  <th scope="col">Monday</th>
                  <th scope="col">Tuesday</th>
                  <th scope="col">Wednesday</th>
                  <th scope="col">Thursday</th>
                  <th scope="col">Friday</th>
                  <th scope="col">Saturday</th>
              </tr>
              </thead>
              <tbody style="z-index: 1;" >
              <tr>
                  <td class="vertical-time" id="vertical-time">


                  </td>
                  <td>
                    <div class="card bg-primary" id="empty-0" style="margin-bottom: 5px;"></div>

                      <div id="0"
                            ondrop="drop(event)" ondragover="allowDrop(event,this)"  style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px" >
                      </div>
                      <button id="gap-0" data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(0)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button>
                  </td>
                  <td>
                    <div class="card bg-primary" id="empty-1" style="margin-bottom: 5px;"></div>

                      <div id="1"
                           ondrop="drop(event)" ondragover="allowDrop(event)" style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px" >
                        </div>
                      <button id="gap-1"  data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(1)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button></td>

                  <td>
                    <div class="card bg-primary" id="empty-2" style="margin-bottom: 5px;"></div>

                      <div id="2"
                           ondrop="drop(event)" ondragover="allowDrop(event)" ondragend="" style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px" >
                        </div>
                      <button id="gap-2" data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(2)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button>
                  </td>
                  <td>
                    <div class="card bg-primary" id="empty-3" style="margin-bottom: 5px;"></div>

                      <div id="3"
                           ondrop="drop(event)" ondragover="allowDrop(event)" style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px">
                        </div>
                      <button id="gap-3" data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(3)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button>
                  </td>
                  <td>
                    <div class="card bg-primary" id="empty-4" style="margin-bottom: 5px;"></div>

                      <div id="4"
                           ondrop="drop(event)" ondragover="allowDrop(event)" style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px" >
                        </div>
                      <button id="gap-4" data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(4)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button>
                  </td>
                  <td>
                    <div class="card bg-primary" id="empty-5" style="margin-bottom: 5px;"></div>

                      <div id="5"
                           ondrop="drop(event)" ondragover="allowDrop(event)" style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px" >
                        </div>
                      <button id="gap-5" data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(5)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button>
                  </td>
                  <td>
                    <div class="card bg-primary" id="empty-6" style="margin-bottom: 5px;"></div>

                      <div id="6"
                           ondrop="drop(event)" ondragover="allowDrop(event)" style="width: 100% ;min-width:120px; height: auto;padding-bottom: 50px">
                        </div>
                      <button id="gap-6" data-toggle="modal" data-target="#new_gap" class="btn btn-outline-primary btn-sm" onclick="add_gaps(6)" style="margin-bottom: 5px; height: 40px; width:100%">
                          <i class="fa fa-plus"></i>
                      </button>
                  </td>
              </tr>
              </tbody>
          </table>
        </div>

      </div>
  </div>
</div>

<script>
    var notyf = new Notyf({
        types: [
            {
                type: 'warning',
                background: 'orange',
                icon: {
                    className: 'material-icons',
                    tagName: 'i',
                    text: 'warning'
                }
            }
        ]});
    var work_days=[
        <%= days.charAt(0) %>,
        <%= days.charAt(1) %>,
        <%= days.charAt(2) %>,
        <%= days.charAt(3) %>,
        <%= days.charAt(4) %>,
        <%= days.charAt(5) %>,
        <%= days.charAt(6) %>,
    ];

      var times =
          [
              {start:{hour:8, min:0},current:{hour:8, min:0}},
              {start:{hour:8, min:0},current:{hour:8, min:0}},
              {start:{hour:8, min:0},current:{hour:8, min:0}},
              {start:{hour:8, min:0},current:{hour:8, min:0}},
              {start:{hour:8, min:0},current:{hour:8, min:0}},
              {start:{hour:8, min:0},current:{hour:8, min:0}},
              {start:{hour:8, min:0},current:{hour:8, min:0}},
      ];


      var sub_entities = [

    <% if(check){

     %>
          <% for (let i = 0; i < sub_entities.length ; i++) { %>
          {
            id: <%=sub_entities[i].id %>,
            name : "<%= sub_entities[i].name %>",
            entity_name: "<%= sub_entities[i].entity.name %>" ,
            entity_id: "<%= sub_entities[i].entity.id %>" ,
            emp_number : <%= sub_entities[i].nb_emp %>,
            emp: [],
            start : {hour: <%=sub_entities[i].positions[0].start.split(":")[0] %> , min : <%=sub_entities[i].positions[0].start.split(":")[1]%>},
            end : {hour: <%=sub_entities[i].positions[0].end.split(":")[0]%>, min : <%=sub_entities[i].positions[0].end.split(":")[1]%>},
            day: <%=sub_entities[i].positions[0].day%> ,
            hours: <%= sub_entities[i].hours %>,
            min: <%= sub_entities[i].min %>,
            complex : <%= sub_entities[i].complex %>,
              entity_complex : <%= sub_entities[i].entity.complex %>,
          } ,


        <% }%>


      
      <% } else { %>
        <% for (let i = 0; i < sub_entities.length ; i++) { %>
          {
            id: <%=sub_entities[i].id %>,
            name : "<%= sub_entities[i].name %>",
            entity_name: "<%= sub_entities[i].entity.name %>" ,
            entity_id: "<%= sub_entities[i].entity.id %>" ,
            emp_number : <%= sub_entities[i].nb_emp %>,
            emp: [],
            start : {hour: 0 , min : 0},
            end : {hour: 0, min : 0},
            day: -1 ,
            hours: <%= sub_entities[i].hours %>,
            min: <%= sub_entities[i].min %>,
            complex : <%= sub_entities[i].complex %>,
              entity_complex : <%= sub_entities[i].entity.complex %>,


          } ,

        <% }%>
        <% } %>
        ]



</script>
<script src="/planning_view.js"></script>
